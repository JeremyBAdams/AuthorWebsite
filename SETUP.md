# SETUP

This file contains instructions on how to configure django and associated dependencies for author-website web application.
NOTE: this is for a local MacOSX machine (corresponds to dev branch in github)

### Linux libraries

-installed libraries via the commands:
```
sudo yum install postgresql
sudo yum install postgresql-contrib
sudo yum install postgresql-server
sudo yum install libpq-dev
```

### PostgreSQL

-to initialize db after installing above dependencies
```
sudo service postgres initdb
sudo service postgres start
```

-to adjust database, become postgres user, and enter psql terminal:
```
sudo -su postgres
psql
```

-create database and change postgres user password
```
create database author_website_db;
create user author_website_db_user with password 'mypassword';
alter role author_website_db_user set client_encoding to 'utf8';
alter role author_website_db_user set default_transaction_isolation to 'read committed';
alter role author_website_db_user set timezone to 'UTC';
grant all privileges on database author_website_db to author_website_db_user;
```

-adjust pg_hba.conf file to allow md5 logins (passwords)
```
# TYPE  DATABASE        USER            ADDRESS                 METHOD
local   all             all                                     md5
host    all             all             127.0.0.1/32            md5
host    all             all             ::1/128                 md5
```

-restart postgresql
```
sudo /etc/init.d/postgresql restart
```

### Python

##### python installation

Version: Python [3.6.3](https://www.python.org/downloads/release/python-363/) - Gzipped tarball

-tarball was downloaded to machine and moved to python directory
-tarball was installed via the commands
```
PYTHON_DIR=${HOME_DIRECTORY/my-software/python}
gunzip Python-3.6.3.tgz
tar -xvf Python-3.6.3.tar
cd Python-3.6.3
./configure --prefix=${PYTHON_DIR}
make altinstall
```
Symbolic links of pip and python executables were made in the bin directory, and this directory was added to the PATH environment variable in .bashrc
```
ln -s python3.6 python
ln -s pip3.6 pip
```

##### virtualenv installation

The website achieves python package dependency virtualization via [virtualenv](https://virtualenv.pypa.io/en/stable/) module. To set up isolated dependency environment, create the following directory structure:
```
VIRTUAL_ENV=${HOME_DIRECTORY}/my-software/python-virtual-envs/author-website
mkdir ${VIRTUAL_ENV}
pip install virtualenv
virtualenv ${VIRTUAL_ENV}
```

##### virtualenv activation

Once the python virtual environment has been installed, it is time to activate it, and install dependencies within it
```
cd ${VIRTUAL_ENV}/bin
source activate
```

##### python dependencies

With the author-website virtual environment activated, python dependencies can be installed via one of two methods:
1. using the requirements.txt file in this repository (generated by "pip freeze")
2. the install commands below
```
pip install django
pip install psycopg2
```
